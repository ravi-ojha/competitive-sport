'use strict';(function(g){function d(){}function h(b,f){if(a)return f.indexOf(b);for(var i=f.length;i--;)if(f[i]===b)return i;return-1}var b=d.prototype,j=[],a=j.indexOf?!0:!1;b.getListeners=function(a){var f=this._events||(this._events={});return f[a]||(f[a]=[])};b.addListener=function(a,f){var i=this.getListeners(a);-1===h(f,i)&&i.push(f);return this};b.removeListener=function(a,f){var i=this.getListeners(a),b=h(f,i);-1!==b&&(i.splice(b,1),0===i.length&&(this._events[a]=null));return this};b.addListeners=
function(a,f){return this.manipulateListeners(!1,a,f)};b.removeListeners=function(a,f){return this.manipulateListeners(!0,a,f)};b.manipulateListeners=function(a,f,i){var b,e,c=a?this.removeListener:this.addListener,a=a?this.removeListeners:this.addListeners;if("object"===typeof f)for(b in f){if(f.hasOwnProperty(b)&&(e=f[b]))"function"===typeof e?c.call(this,b,e):a.call(this,b,e)}else for(b=i.length;b--;)c.call(this,f,i[b]);return this};b.removeEvent=function(a){a?this._events[a]=null:this._events=
null;return this};b.emitEvent=function(a,b){for(var i=this.getListeners(a),d=i.length;d--;)!0===i[d].apply(null,b||j)&&this.removeListener(a,i[d]);return this};"function"===typeof define&&define.amd?define(function(){return d}):g.EventEmitter=d})(this);
StackExchange.realtime=function(){function g(){if(!(null==n||1!=n.readyState))for(var c=0,a=u.length;c<a;c++)d("sending: "+u[c]),n.send(u[c])}function d(c){StackExchange.options.user.isEmployee&&console.log(c)}function h(){o.addListener("hb",function(c){n.send(c)})}function b(c){u.push(c);g()}function j(c,a){1!=$("#vote-accepted-"+c.answerid).length&&($(".vote-accepted-on").remove(),a||$('.vote input[value="'+c.answerid+'"]').parent().append('<span class="vote-accepted-on" title="The question owner accepted this as the best answer">accepted</span>'))}
function a(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(c){if(c&&c.count){var c=c.count,a=$(".suggested-edits-count");a.text()!=c&&(0==$(":animated").length&&a.fadeTo("fast",0.5).fadeTo("fast",1),a.text(c))}}})}function l(){$("#new-answer-activity").remove();$("#answers-header").prepend(A)}function f(c){var a=$(".question[data-questionid="+c.id+"], .answer[data-answerid="+c.id+"]"),e=$('<div class="new-post-activity" data-postid="'+
c.id+'">an edit has been made to this post; click to load</div>');0<a.find(".new-post-activity[data-postid="+c.id+"]").length||a.prepend(e.click(function(){$(".new-post-activity[data-postid="+c.id+"]").remove();0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({postIdsSemiColonDelimited:c.id}),z(a.find(".postcell, .answercell"),c));$(document).trigger("refreshEdit",c.id)}))}function i(c,a,i){null!=StackExchange.options.user.accountId&&
StackExchange.tagPreferences.isIgnored(c.body)||(c.fetch&&$.ajax({url:"/posts/"+c.id+"/"+i}).done(function(a){c.body=a;p[c.id]={id:c.id,body:c.body,index:(new Date).getTime(),siteid:c.siteid}}),p[c.id]={id:c.id,body:c.body,index:(new Date).getTime(),siteid:c.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(t),0<$(".tag-sponsorship").length&&$("#question-mini-list, #questions").css("margin-top","0px"),a&&e())}function m(c,a){return c.index<a.index?-1:c.index>a.index?
1:0}function e(){var a=[],e;for(e in p)p.hasOwnProperty(e)&&a.push(p[e]);a=a.sort(m);for(e=0;e<a.length;e++){var i=a[e];$("#question-summary-"+i.id).remove();$(i.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}c(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,B);styleCode();k();$(".new-post-activity").remove();p={}}function c(c){var a=document.title.replace(/^\(\d*\*?\) /,"");0<c&&(a="("+c+") "+a);window.setTimeout(function(){$(document).attr("title",
a)},200)}function k(){for(var c=$("span.relativetime, span.relativetime-clean"),a=0;a<c.length;a++)if(c[a].title){var e;e=c[a].title;if(null==e||20!=e.length)e=void 0;else{e=e.substr(0,10)+"T"+e.substr(11,10);e=new Date(e);e=((new Date).getTime()-e.getTime())/1E3+StackExchange.options.serverTimeOffsetSec;var i=Math.floor(e/86400);e=isNaN(i)||0>i||31<=i?void 0:0==i&&(2>e&&"just now"||60>e&&Math.floor(e)+(r?"s ago":" secs ago")||120>e&&(r?"1m ago":"1 min ago")||3600>e&&Math.floor(e/60)+(r?"m ago":" mins ago")||
7200>e&&(r?"1h ago":"1 hour ago")||86400>e&&Math.floor(e/3600)+(r?"h ago":" hours ago"))}e&&(c[a].innerHTML=e)}}var n,p={},q=[],v=0,u=[],x=10,y=!1,r=!1,B,o=new EventEmitter,A=function(){var c=Object.keys(q).length;0==c&&$("#new-answer-activity").remove();return $('<div id="new-answer-activity">'+c+" new answer"+(1<c?"s":"")+" to this question</div>").click(function(){StackExchange.realtime.expandAnswers()})},z=function(c,a){return function(e){var i=$(e).filter(".question, .answer"),k=i.find(".postcell, .answercell"),
b=c.closest(".question"),f=0<b.length,j=$("h1 a.question-hyperlink"),d=i.data("title"),n=f&&$.trim(j.text())!=d,h=$(".question-status"),g=function(c,a){return function(){return $.Deferred(function(e){null==a||a()?c.animate({opacity:0},150).promise().done(function(){e.resolve()}):e.resolve()})}},i=g(j,function(){return n}),l=g(c),g=g(h);$.when(i(),l(),g()).done(function(){n&&j.text(d).animate({opacity:1},150);var a=function(c,a){return new $.Deferred(function(e){a.css({opacity:0});c.replaceWith(a);
a.animate({opacity:1},150,function(){e.resolve()})})};a(c,k).done(function(){styleCode();StackExchange.question.bindSuggestedEditPopupLinks();f&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var i=$(e).filter(".question-status");i.length?(h.length||(h=$("<div>").addClass("question-status").insertAfter(b)),a(h,i)):h.remove()});window.history.pushState(a,"new post","#"+a.id)}},t=function(){var a=Object.keys(p).length;c(a);return $('<div class="new-post-activity">'+a+" question"+
(1<a?"s":"")+" with new activity</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(c){var a=c.split(","),a=a[v%a.length];null!=a&&0!=a.indexOf("ws://")&&0!=a.indexOf("wss://")&&(a=("https:"===document.location.protocol?"wss://":"ws://")+a);if("WebSocket"in window||"MozWebSocket"in window){if(n)try{d("closing WebSocket"),n.close()}catch(e){}n||(d("opening WebSocket to: "+a),n="WebSocket"in window?new WebSocket(a):new MozWebSocket(a),n.onopen=function(){y||
(y=!0);v=0;d("WebSocket opened");g();h();setInterval(k,6E4)},n.onmessage=function(c){c=$.parseJSON(c.data);o.emitEvent(c.action,[c.data])},n.onclose=function(){n=null;d("WebSocket closed");5>v&&0<x&&(v++,x--,d("reconnect attempt:"+v+" max retries:"+x),setTimeout(function(){StackExchange.realtime.init(c)},1E3*((new Date).getTime()%50/20)))},n.onerror=function(){d("WebSocket failed");n=null})}},expandActiveQuestions:e,expandAnswers:function(){$("#tabs").show();$("#new-answer-activity").remove();var c=
$("#answers #answers-header"),a=c.find(".answers-subheader h2"),e=parseInt(a.text())+q.length;isNaN(e)&&(e=q.length);a.text(e+" Answer"+(1<e?"s":""));$.ajax({url:"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({postIdsSemiColonDelimited:q.join(";")})}).done(function(a){var e=$('<div class="dno" />').append(a);e.insertAfter(c).fadeIn(400,function(){e.removeClass("dno");styleCode();StackExchange.vote.init($(".question").data("questionid"));e.find(".answer").each(function(){StackExchange.comments.init({post:$(this)})})})});
StackExchange.question.bindSuggestedEditPopupLinks();k();q=[]},subscribeToActiveQuestions:function(c,a,e,k,f,j,d){c=c+"-"+a;B=e;r=j;b(c);o.addListener(c,function(c){c=$.parseJSON(c);if(null!=f)for(var e=0;e<f.length;e++)if(-1==$.inArray(f[e],c.tags))return;i(c,k,a);null!=d&&d(c)})},subscribeToInboxNotifications:function(){if(null!=StackExchange.options.user.accountId){var c=StackExchange.options.user.accountId+"-inbox";b(c);o.addListener(c,function(c){$(".unreadCount").remove();var a=$('<a class="unreadCount" title="unread messages in your inbox">'+
c+"</a>").insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:a.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(c)})}},subscribeToQuestion:function(c,a){var e=c+"-question-"+a;b(e);o.addListener(e,function(c){var a=$.parseJSON(c);if(a.acctid!=StackExchange.options.user.accountId)switch(a.a){case "score":c=$('.vote input[value="'+a.id+'"]').siblings(".vote-count-post");c.text()!=a.score&&(c.text(a.score),0==$(":animated").length&&c.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&
StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":if(0==$("#comment-"+a.commentid).length){var c=$("#comments-link-"+a.id),e=c.clone(!0).attr("id","hidden-"+c.attr("id")).hide();c.is("span")&&(a=$('<a id="comments-link-'+a.id+'" href="#"></a>'),c.replaceWith(a),c=a);c.after(e);a=c.data("comments-count")||0;a++;c.data("comments-count",a);c.attr("title","expand to show all comments on this post, or add one of your own");c.html("add / show <b>"+a+"</b> more comment"+(1<a?"s":"")).show().fadeTo("fast",
0.7).fadeTo("fast",1)}break;case "answer-add":0==$("#answer-"+a.answerid).length&&(q.push(a.answerid),StackExchange.cardiologist&&(StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(l,5E3).trigger():l(),StackExchange.cardiologist.notifiedOfNewAnswer()));break;case "accept":j(a);break;case "unaccept":j(a,!0);break;case "post-edit":f(a)}})},unsubscribeToQuestion:function(c,a){var e=c+"-question-"+a;d("unsubscribing: "+e);var i=$.inArray(e,u);-1!=i&&(u.splice(i,1),null==
n||1!=n.readyState||n.send("-"+e))},subscribeToReputationNotifications:function(c){null!=StackExchange.options.user.accountId&&(c=c+"-"+StackExchange.options.user.userId+"-reputation",b(c),o.addListener(c,function(c){var a=$("#hlinks .reputation-score");a.text()!=c.score&&(0==$(":animated").length&&a.fadeTo("fast",0.8).fadeTo("fast",1),a.text(c))}))},subscribeToSuggestedEdits:function(c){c+="-suggested-edits-count-update";b(c);o.addListener(c,function(){a()})},updateRelativeDates:k,subscribeToReviewDashboard:function(c){c+=
"-review-dashboard-update";b(c);o.addListener(c,function(c){var c=$.parseJSON(c),a=$('.dashboard-activity[data-review-task="'+c.i+'"]');0==a.find('.dashboard-user[data-user="'+c.u+'"]').length&&(a.find(".dashboard-user:nth-child(6)").remove(),a.children().css({left:"-44px"}),a.prepend(c.html).children().animate({left:0}))})}}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(g){if(gauth.enabled()){var d=document.domain;"meta."==d.substr(0,5)&&(d=d.substr(4,d.length-4));var h=$.cookie("gauth");if(null==h)$.cookie("gauth",null,{path:"/",domain:d}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=d.charAt(0)&&(d="."+d);$.cookie("gauth",null,{path:"/",domain:d});$.cookie("gauth",null,{path:"/",domain:document.domain});var b=h.indexOf(":"),d=h.substr(0,b),h=h.substr(b+1),j=g+"/auth/global/write?authToken="+
encodeURIComponent(d)+"&nonce="+encodeURIComponent(h);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+j+"'></iframe>")})}}},checkStackAuth:function(g){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var d=function(d){if(d.origin==g)if("No Local Storage"==d.data)gauth.noGAuthStorage();else if("No Session"==d.data)gauth.noGAuthSession();else{var b=d.data.substr(0,d.data.indexOf(",")),d=d.data.substr(d.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:b,nonce:d},function(b){gauth.globallyAuthed(b)},"json")}};window.attachEvent?window.attachEvent("onmessage",d):window.addEventListener("message",d,!1);$.post("/users/login/global/request","",function(d){var b=g+"/auth/global/read?request="+encodeURIComponent(d.token)+"&nonce="+encodeURIComponent(d.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+b+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(g){if(g&&g.Message){var g=g.Message+" ",d,h=!1,b=""+window.location,j=b.indexOf("returnurl=");if(-1!=j){var a=b.indexOf("&",j);-1==a&&(a=b.length);d=decodeURIComponent(b.substring(j+10,a));d=/^(?:http:\/\/|\/)/.test(d)?d.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=b.indexOf("/users/login")&&
(h=!0,d=d||"/");StackExchange.helpers.showFancyOverlay({message:h?g+"<br>You are being redirected...":g+(d?"<a href=\"javascript:window.location='"+d+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!h,complete:function(){h&&(window.location=d)}})}}}}(),genuwine=function(){var g,d="",h,b,j=[],a=function(){return $(".genu").hasClass("genu-on")},l=function(){var c=$(".genu"),a=$("#seWrapper");if(0==a.length||
0<h||b){i();var a=$("#seWrapper"),e;0<h?(e=$("#seTabInbox"),q(e)):b?(e=$("#seTabNotices"),m(e)):(e=$("#seTabHot"),k(e));e.addClass("seCurrent")}if(e=c.hasClass("genu-on")){$(".unreadCountTab").remove();$("#portalLink .itemBoxNew").removeClass("itemBoxNew");a.fadeOut("fast");for(a=0;a<j.length;a++)j[a]();j=[];0<b&&$("#portalLink .unreadCount").text(""+b).addClass("newNotices").show().click(l)}else a.fadeIn("fast"),$("#portalLink .unreadCount").hide();c.toggleClass("genu-on",!e);-1==h&&$(c).ready(function(){$("#seTabInbox").hide()});
f($("#seTabInbox"),$("#seTabNotices"))},f=function(c,a){StackExchange.options.site.isNoticesTabEnabled&&b&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab newNotices">'+b+"</span>");0<h&&0==c.find(".unreadCountTab").length&&c.prepend('<span class="unreadCountTab">'+h+"</span>")},i=function(){$("#seWrapper").remove();var a='<div id="seWrapper" class="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+d+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+
(!StackExchange.options.user.isAnonymous?'<li><a id="seTabInbox">Inbox</a></li>':"")+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter"><a id="seClose">close</a></div></div>',e=$("#hlinks"),e=e.height()+e.offset().top+5;$(a).appendTo("#portalLink").css({top:e}).find("ul.seNavLinks a").click(function(){var a=$(this);$(".seNavLinks a").removeClass("seCurrent");
a.addClass("seCurrent");switch(a.attr("id")){case "seTabHot":k(a);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&c(a);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":q(a);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();$("#seContainerInbox").fadeIn("fast");
break;case "seTabNotices":m(a),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){l()})},m=function(c){0==$("#seContainerNotices").length&&y(c,"/notices/genuwine","jsonp",e,!0)},e=function(c,a){for(var e='<div id="seContainerNotices" style="display:none">',i=0;i<a.length;i++){var k=a[i],d=k.text,n=k.is_unread,h=k.site_url,g=k.icon,l=k.hasOwnProperty("type")?' data-type="'+k.type.toString()+
'"':"";null!=k.switch_type&&(l=l+' data-sw-type="'+k.switch_type.toString()+'" data-sw-site="'+k.site_id.toString()+'"');e+='<div class="noticeBox'+(n?" itemBoxNew":"")+'"'+l+'><a href="'+h+'" class="siteLinkFavicon"><img src="'+g+'"></a><div class="siteInfo"><p>'+d+"</p></div></div>"}r(c,e+"</div>","notifications_popup.click");j.push(function(){b=0;f($("#seTabInbox"),$("#seTabNotices"))});b=0},c=function(c){y(c,d+"/genuwine/sites?callback=?&host="+document.location.host+(g?"&accountId="+g:""),"jsonp",
p)},k=function(c){0==$("#seContainerHot").length&&y(c,d+"/genuwine?callback=?","jsonp",n)},n=function(c,a){for(var e=$("<div/>"),i='<div id="seContainerHot" style="display:none">',k=0;k<a.length;k++)var b=a[k],f=b.SiteId,d='href="http://'+f+"/q/"+b.Id+'?hq=1"',j=parseInt(b.DisplayScore,10),n=b.Sid,i=i+('<div class="itemBox"'+(null==n?"":' data-sw-type="2" data-sw-site="'+n.toString()+'"')+"><a "+d+' class="seNumAnswer">'+j+'</a><div class="siteInfo"><p><a '+d+">"+e.text(b.Title).html()+'</a></p><a href="http://'+
f+'" class="siteLink">'+f+"</a></div></div>");r(c,i+"</div>")},c=function(c){y(c,d+"/genuwine/sites?callback=?&host="+document.location.host+(g?"&accountId="+g:""),"jsonp",p)},p=function(c,a){for(var e='<div id="seContainerSites" style="display:none">',i=0;i<a.length;i++)var k=a[i],b=k.Name,f='href="http://'+k.Id+'?as=1"',d=k.Sid,e=e+('<div class="itemBox"'+(null==d?"":' data-sw-type="3" data-sw-site="'+d.toString()+'"')+"><a "+f+' class="siteFavicon"><img src="'+k.FaviconUrl+'" alt="'+b+'"></a><div class="siteInfo"><p><a '+
f+">"+b+"</a></p><a "+f+' class="siteLink">'+k.Description+"</a></div></div>");r(c,e+"</div>")},q=function(c){-1!=h&&(0==$("#seContainerInbox").length||0<h)&&v(c)},v=function(c){y(c,"/inbox/genuwine","json",u,!0)},u=function(c,a){for(var e='<div id="seContainerInbox" style="display:none">',i=0;i<a.length;i++){var k=a[i],b='href="'+k.Url+'"',d='title="'+k.CreationDate+'"',n=k.Count,l=k.IsNew?" itemBoxNew":"",m=k.hasOwnProperty("ItemType")?' data-type="'+k.ItemType.toString()+'"':"";null!=k.SiteId&&
(m=m+' data-sw-type="7" data-sw-site="'+k.SiteId.toString()+'"');e+='<div class="itemBox'+l+'"'+m+"><a "+b+' class="siteLinkFavicon"><img src="'+k.FaviconUrl+'" alt="'+k.SiteUrl+'"></a><div class="siteInfo">';"careers message"==k.Type?e+="<p><a "+b+' style="font-weight:normal"><b>'+k.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":"invitation"==k.Type?(d=k.Count,e+="<p><a "+b+' style="font-weight:normal"><b>'+d+"</b> "+("invitation"+(1<d?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):
e+="<p>"+(1<n?n+" ":"")+k.Type+" on <a "+b+" "+d+">"+k.Title+"</a></p>";e+='<p class="inboxSummary">'+(k.Summary||"")+"</p></div></div>"}g&&5<=a.length&&(e+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+g+'?tab=inbox">more inbox messages &hellip;</a></div></div>');r(c,e+"</div>","inbox_popup.click");j.push(function(){h=0;f($("#seTabInbox"),$("#seTabNotices"))});h=0},x={},y=function(c,a,e,k,i){var b=c.attr("id");if(x[b])B();else{x[b]=!0;B();var f=function(){x[b]=
!1;StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:a,dataType:e,success:function(a){x[b]=!1;a&&(0<a.length||i)?k(c,a):f()},error:f,complete:function(){$("#seWrapper .seContainer").removeSpinner()}})}},r=function(c,a,e){a=$(a);a.prependTo("#seWrapper .seContainer");a.find(".itemBox a, .noticeBox a").click(function(){var c=$(this).closest(".itemBox, .noticeBox");e&&e.length&&StackExchange.gps.track(e,
{item_type:c.data("type")});var a=c.data("sw-type"),c=c.data("sw-site");null!=a&&null!=c&&StackExchange.gps.track("site.switch",{item_type:a,target_site:c})});c.hasClass("seCurrent")&&a.fadeIn("fast")},B=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner("#seWrapper .seContainer",{position:"relative",left:"10px",top:"10px"})},o=function(){var c=$("#portalLink .unreadCount"),a=c.css("margin-top");c.css({marginTop:-20,opacity:0}).show().animate({marginTop:a,opacity:1},
2E3)},A=function(){var c=$("#portalLink .unreadCount"),a=c.data("events");(!a||!a.click)&&0<c.length&&c.click(l)};return{isVisible:a,click:l,setUnreadCount:function(c){h=c;var e=$("#seTabInbox");0<c?($("#portalLink .unreadCount").text(h),e.hasClass("seCurrent")&&a()&&v(e),o()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");A()},animateInbox:o,init:function(c,e,k){var i=$(".genu");1<=i.length&&(i[0].onclick=null);g=c;d=i.attr("href");h=e;b=k;!(0<
h)&&StackExchange.options.site.isNoticesTabEnabled&&(99<b&&(b=99),0<b&&$("#portalLink .unreadCount").text(""+b).addClass("newNotices"),A());i.removeAttr("href").click(l);A();$(document).click(function(c){a()&&!$.contains($("#portalLink")[0],c.target)&&l()})}}}();
StackExchange.notify=function(){function g(a,b){var e=$("#dismissed-messages");e.val(e.val()+"~"+a+(b?" "+b:"")+"~")}function d(a,b){var e=$("#dismissed-messages").val();return!e?!1:RegExp("~"+a+(b?" "+b:"")+"~").test(e)}function h(a,b,e){var c=parseInt($("body").css("margin-top").match(/\d+/)),a=b*c/a;e?$("body:not(.no-message-slide)").animate({marginTop:a+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",a+"px")}var b=0,j=function(a,f){var e=$("#notify-"+a+(f?"-"+f:""));-1==
a?$.cookie("m","0",{expires:90,path:"/"}):-1<a&&$.post("/messages/mark-as-read",{messagetypeid:a,id:f?f:null});g(a,f);b--;e.fadeOut("fast",function(){h(b+1,b,!0);e.remove()})},a=function(a){b++;if(d(a.messageTypeId,a.id))return!1;var f="";a.messageTypeId&&(f=' id="notify-'+a.messageTypeId+(a.id?"-"+a.id:"")+'"');f="<div"+f+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+a.text+"</span>";if(a.showProfile)var e=encodeURIComponent("/users/"+
a.userId+"?tab=badges&sort=recent"),f=f+(' See your <a href="/messages/mark-as-read?messagetypeid='+a.messageTypeId+"&returnurl="+e+'">profile</a>.');f=$(f+"</div>");f.find(".notify-close").click(function(){a.close&&a.close();j(a.messageTypeId,a.id)});$("#notify-container").append(f);return!0},l=function(){$("#notify-container div").fadeIn("slow")},f=function(b,f){var e=$('<div class="link-more"><a>view '+b+" more notification"+(1!=b?"s":"")+"</a></div>");$("#notify-container").append(e);e.click(function(){e.detach();
for(var c=0;c<f.length;c++)a(f[c]);l()})};return{showMessages:function(i,d){for(var e=0,c=d?2:i.length,k=0;k<c&&k<i.length;k++)a(i[k])&&e++;h(b,e,!1);l();d&&e<i.length&&(c=i.slice(c),f(i.length-e,c))},show:function(b,f){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");a({text:b,messageTypeId:f});l()},close:j,getMessageText:function(a){return $("#notify-"+a+" .notify-text").text()}}}();
function moveScroller(){var g=$("#scroller").width(),d=function(){var d=$(window).scrollTop(),b=$("#scroller-anchor").offset().top,j=$("#scroller");d>b?j.height()>$(window).height()?j.css({position:"fixed",top:"",bottom:"0px",width:g}):j.css({position:"fixed",top:"0px",bottom:"",width:g}):d<=b&&j.css({position:"relative",top:"",bottom:""})};$(window).scroll(d).resize(d);d()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var g=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),g=!0);var d;if(d=!$(this).hasClass("prettyprint")){d=$(this);var h=$("#prettify-lang").text();""!=h?(d.addClass(h),d=!0):d=!1}d&&($(this).addClass("prettyprint"),g=!0)});g&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(g){function d(a,b){var e=$("<div id='"+g.id+"'/>").html(b),c=$("<div />").css({overflow:"hidden",position:"absolute","z-index":1002,width:1,height:1,top:0,left:0}).append(e).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(e.attr("id"));var k=g.showing(a,e),f={left:k.left};k.hasOwnProperty("bottom")?(f.bottom=k.bottom,f.top="auto"):f.top=k.top;var d;g.shown&&(d=function(){g.shown(a,e)});c.css(f).animate({height:e.outerHeight()+8,width:e.outerWidth()+8},
300,d);h=function(){c.stop().remove();g.removed&&g.removed(a,e);h=j=null};j=StackExchange.helpers.DelayedReaction(h,5);f=c;k.additional&&(f=f.add(k.additional));f.hover(j.cancel,j.trigger)}var h,b,j,a,l={},f=StackExchange.helpers.DelayedReaction(function(b,f){if(!a&&b){var e;g.cache&&"c_"+b in l?e=$.Deferred().resolve(l["c_"+b]):(e=$.ajax({type:"GET",url:b,dataType:"html"}),g.cache&&e.done(function(c){l["c_"+b]=c}));e.done(function(c){h&&h();""!=c&&d(f,c)})}},500);$(document).delegate(g.selector,
{mouseenter:function(){if(j&&this===b)j.cancel();else return b=this,f.trigger(g.getUrl(this),this),a=!1},mouseleave:function(){a=!0;f.cancel();j&&j.trigger()}})};
StackExchange.tagmenu=function(){function g(b){var b=$(b),a=b.attr("href");if(!a||"/"!=a.charAt(0))return null;a=b.text();if(-1<a.indexOf("*"))return null;b.attr("title","");return"/tags/"+encodeURIComponent(a)+"/subscriber-info"}function d(b,a){var d=$(b),f=d.offset(),i=d.outerHeight(),d={left:f.left},h=f.top+i,i=f.left+a.outerWidth();a.height()+h>$(window).height()+$(window).scrollTop()?d.bottom=$(window).height()-f.top-8:d.top=h;f=Math.max(1024,$(window).width());i>f&&(d.left-=i-f);return d}var h,
b;return{init:function(j){h=j;b||(b=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag,.no-tag-menu)",id:"tag-menu",getUrl:g,showing:d,shown:function(a,b){h&&h(b,$(a).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function g(d,a){var h=$(d).find("img:first"),f=h.offset(),i=h.height(),g=h.width(),e=Math.max(g,i),c=64*i/e,e=64*g/e,k=a.find("img:first").css({width:e,height:c}),n=k.offset();k.css("visibility","hidden");b=h.clone().css({position:"absolute",zIndex:1003,left:f.left,top:f.top,width:g,height:i}).appendTo("body");var p=function(){k[0].complete?(k.css("visibility","visible"),b.fadeOutAndRemove()):setTimeout(p,500)};b.animate({width:e,height:c,top:f.top+n.top},200,p);
return{top:f.top,left:f.left-n.left,additional:b}}function d(){b.remove()}var h,b;return{init:function(){h||(h=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(b){b=/\/users\/([^/]+).*$/.exec($(b).closest(".user-hover").find(".user-details a").attr("href"));return!b?null:"/users/user-info/"+b[1]},cache:!0,id:"user-menu",showing:g,removed:d}))}}}();
StackExchange.chatAd=function(){function g(){var c=$(".question .post-taglist .post-tag");return!c.length?null:c.map(function(c,a){return $(a).text()}).get().join(" ")}function d(c){return 10>c?"0"+c:c}function h(c){var a=new Date;a.setTime(1E3*c);return[a.getUTCFullYear(),"-",d(a.getUTCMonth()+1),"-",d(a.getUTCDate())," ",d(a.getUTCHours()),":",d(a.getUTCMinutes()),":",d(a.getUTCSeconds()),"Z"].join("")}function b(c){var a=Math.floor((new Date).getTime()/1E3)-c,e=a%60,b=Math.floor(a/60),k=Math.floor(a/
3600);if(1>a)return"just now";if(60>a)return 1==e?"1 sec ago":e+" secs ago";if(3600>a)return 1==b?"1 min ago":b+" mins ago";if(86400>a)return 1==k?"1 hour ago":k+" hours ago";a=Math.floor(a/86400);if(1==a)return"yesterday";if(2>=a)return a+" days ago";c=new Date(1E3*c);return q[c.getMonth()]+" "+c.getDate()+" at "+c.getHours()+":"+d(c.getMinutes())}function j(c){var a=$("<div />");a.text(c);return a.html().replace('"',"&quot;")}function a(){$.get(c,null,function(c,a,e){m(c,a,e)})}function l(c){if("!"==
c.charAt(0)){c=c.substr(1);if(/^http:\/\/i.stack.imgur.com\//.test(c))var a=/\?/.test(c)?"&":"?",c=c+(a+"g&s=32");return c}return"https://www.gravatar.com/avatar/"+c+"?s=23&d=identicon&r=PG"}function f(c){for(var a=$('<div class="ad502-users" />'),k=0;k<c.length&&7>k;k++){var f=c[k],d=f.name;f.lastPost&&(d+=": "+b(f.lastPost));var i=$('<a href="'+(e+"/users/"+f.id)+'" />');$("<img height='23' width='23' />").attr("title",d).attr("src",l(f.emailhash)).appendTo(i);a.append(i)}return a}function i(c){var a=
c.user;return(c=c.userid)?'<a href="'+e+"/users/"+c+'">'+j(a)+"</a>":j(a)}function m(c){var d=$("#ad502-rooms");if(!c.error){d.html("");for(var g=c.rooms,l=0;l<g.length&&2>l;l++){var r=g[l],q=e+"/rooms/"+r.id,o=$('<div class="ad502-room"></div>');o.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+j(r.name)+'"><a href="'+q+'">'+j(r.name)+"</a></span></h3>"));r.messages&&0<r.messages.length&&o.append($('<span title="'+h(r.lastPost)+'" class="ad502-last-message">'+b(r.lastPost)+
" - "+i(r.messages[0])+"</span><br>"));r.singleImage?o.append($('<div class="ad502-users"><img src="'+e+"/rooms/users/"+r.id+'.jpeg" /></div>')):o.append(f(r.users));d.append(o)}1<c.activeUsers?$("#h-chat-link").text(c.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",c.activeUsers+" users active in "+c.activeRooms+" rooms the last 60 minutes")}k<=p&&window.setTimeout(a,1E3*k);k+=n}var e,c,k=180,n=30,p=480,q="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");
/^\/questions\/\d+/i.test(window.location.pathname)&&(p=0);return{init:function(b){e=b.chatUrl;c=b.reloadUrl;if(b.tagBased){var k=g();if(!k)return;c+=(/\?/.test(c)?"&":"?")+"tags="+encodeURIComponent(k)}null===b.preloadData?a():m(b.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var g={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(d){for(var h in g)g.hasOwnProperty(h)&&(d=d.replace(RegExp("["+h+"]","g"),g[h]));return d}}();
function sanitizeAndSplitTags(g,d){for(var g=$.trim(g).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),h=g.split(/[\s|,;]+/),b=[],j=0;j<h.length;j++){var a=h[j].toLowerCase();StackExchange.options.site.nonAsciiTags||(a=StackExchange.helpers.noDiacritics(a));a=a.replace(/_/g,"-");a=a.replace(RegExp("[^a-z0-9.#+"+(d?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");a=a.replace(/^[#+-]+/,"");a=a.replace(/[.-]+$/,"");0<a.length&&-1==$.inArray(a,b)&&b.push(a)}return b}
StackExchange.question=function(){function g(){$(window).off("hashchange.highlightDestination").on("hashchange.highlightDestination",function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?f(a[2],a[3]):i($(".answer[data-answerid="+a[1]+"]")))}).trigger("hashchange.highlightDestination")}var d=function(a,c){var b=null!=a;a||(a=$("div.question div.post-menu a.short-link"));var f=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))f.find(".close-share-tip").click();
else{a.addClass("share-link");var d=a.attr("id").substring(10),i=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",j="http://"+document.location.host+a.attr("href"),h=("answer"==i?"Answer: ":"")+$("#question-header a").text(),g='<div class="share-tip" style="display:none">share a link to this '+i+'<input type="text" value="'+j+'" style="display:block; width:292px;">';StackExchange.options.site.enableSocialMediaInSharePopup&&(g+='<div id="share-icons"><a id="share-gp-'+
d+'" class="share-gp" title="share link to this '+i+' on Google+">share [g+]</a><a id="share-fb-'+d+'" class="share-fb" title="share link to this '+i+' on Facebook">share [fb]</a><a id="share-tw-'+d+'" class="share-tw" title="share link to this '+i+' on Twitter">share [tw]</a></div>');var l=$(g+'<a class="close-share-tip" style="float:right">close</a></div>');StackExchange.options.site.enableSocialMediaInSharePopup&&(i=encodeURIComponent(j),h=encodeURIComponent(h),StackExchange.share.gplus($("#share-gp-"+
d,l),i,h,"2"),StackExchange.share.facebook($("#share-fb-"+d,l),i,h,"2"),StackExchange.share.twitter($("#share-tw-"+d,l),i,h,"2"),$("#share-icons a",l).click(function(){l.fadeOutAndRemove()}));c&&l.find(".close-share-tip").before('<a id="link-post-'+d+'" style="float:left">cite</a>');l.appendTo(f).fadeIn(b?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){l.fadeOutAndRemove()}).end().find("input[type=text]").select()}},h=function(a){var c=
$("#post-form h2:first"),b=c.wrap("<div />").parent(),f=b.wrap("<div />").parent(),d=$("<div />").prependTo(f),i=f.height(),j=$("<div />"),a=$(a),h=parseInt(c.css("margin-bottom")),g=$("#content"),l=$("#wmd-input").outerWidth(),r=g.offset().left>c.offset().left-5&&"visible"!=g.css("overflow-x");j.css({height:0,overflowY:"hidden"}).appendTo(b).append(a);f.css({height:i,position:"relative"});b.css({position:"absolute",bottom:-h,width:l});d.addClass("answer-help-background").css({position:"absolute",
bottom:-h,height:0,width:l});r&&(d.css("left",0),b.animate({paddingLeft:5},1E3));j.animate({height:a.height()+h+10},1E3);d.animate({height:a.height()+h+10+i},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(b).fadeIn(1E3).find("a").one("click",function(a){var e=$(this).parent();setTimeout(function(){e.remove()},1);j.animate({height:0},1E3,function(){j.add(d).remove();c.unwrap().unwrap()});d.animate({height:0},1E3);r&&b.animate({paddingLeft:0},1E3);a.preventDefault()})},
b=function(){$.get("/posts/answer-help").then(h)},j,a,l,f=function(a,c){var b="#comment-"+a,f=$(b);f.length?i(f):StackExchange.comments.loadAll($("#comments-link-"+c)).done(function(){i($(b))})},i=function(a){var c=l;a.css({backgroundColor:j}).animate({backgroundColor:c},2E3,"linear",function(){$(this).css("background-color","")});a.is(".comment")&&a[0].scrollIntoView(!0)},m=function(a){a=a||{};$(".post-menu a.short-link").live("click",function(c){if(!c.ctrlKey&&!c.metaKey)return d($(this),a.showCitation),
!1})};return{initTitleSearch:function(a,c,b){var f=document.title,d=0,i,j;a.attr("autocomplete","off");var h=function(h){var g=a.val();if(!(""==g||g==i&&!0!==h||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var l=g.split(" "),o=0,m=0;m<l.length;m++)0<$.trim(l[m]).length&&o++;l=(new Date).getTime();m=(l-d)/1E3;!0!==h&&(3>o||5>m)&&!a.hasClass("edit-field-overlayed")||(d=l,i=g,b&&(document.title=g?g+" - "+b:f),c.empty(),StackExchange.helpers.addSpinner(c),
j&&j.fadeOutAndRemove(),$.ajax({url:"/search/titles",dataType:"json",data:{title:g},success:function(a){if(a){if(a.notification){var e=StackExchange.postValidation.getSidebarPopupOptions();e.type="info";j=StackExchange.helpers.showMessage(c,a.notification,e)}a.content&&(c.html(a.content),setTimeout(function(){c.find(".answer-link a").attr("target","_blank")},1))}},complete:function(){StackExchange.helpers.removeSpinner(c)}}))}},g=!1;c.mouseenter(function(){g=!0}).mouseleave(function(){g=!1});a.keyup(h).blur(function(){var a=
function(){d=0;h()};if(g)c.one("mouseleave",a);else a()});return function(a){d=0;h(a)}},showShareTip:d,getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");return a},initShareLinks:m,canViewVoteCounts:function(){return a},init:function(e){a=e.canViewVoteCounts;StackExchange.question.fullInit?StackExchange.question.fullInit(e):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:e.autoShowCommentHelp});
m(e);if(e.showAnswerHelp)$("#wmd-input").one("focus",b);e.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});l=e.backgroundColor;j=e.highlightColor;g()}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function g(d){var h=$(this),b=h.closest("div.vote"),j=h.prop("className"),a=/vote-up/.test(j),g=/vote-down/.test(j),j=/star/.test(j);d.preventDefault();if(a||g)if(d=b.find("input").val(),StackExchange.options.isMobile)StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+d+"?voteTypeId="+(a?2:3)),a='Thank you for your feedback.<br />Please <a href="/users/login?returnurl='+escape(document.location)+'">log in or register</a> to vote for this '+
(h.closest(".answer").length?"answer":"question")+".",StackExchange.helpers.showMessage(h,a,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}});else{if(h="anon-vote-popup-"+d,!b.is(":working")&&!$("."+h).length){b.data("working",!0);$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var f=$('<div class="anon-vote-popup popup">Sending feedback&nbsp;</div>').addClass(h).addSpinner();f.appendTo("body").center().fadeIn("fast");$.ajax({type:"POST",
url:"/posts/popup/anon-vote/"+d+"?voteTypeId="+(a?2:3),dataType:"html",success:function(a){f.html(a)},error:function(){f.remove()},complete:function(){b.data("working",!1)}})}}else j&&($(".anon-vote-popup").fadeOutAndRemove(),a='Please <a href="/users/login?returnurl='+escape(document.location)+'">log in or register</a> to favorite this '+(h.closest(".answer").length?"answer":"question")+".",StackExchange.helpers.showMessage(h,a,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}}))}
$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var d=$(this);d.data("bound-anonymous")||(d.data("bound-anonymous",!0),d.click(g))});StackExchange.question.bindFetchAcceptedAnswerDates()};
StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var g=$(this);if(!g.is(":working")){g.working(!0);var d=g.closest(".answer").data("answerid");d?$.get("/posts/"+d+"/accepted-answer-date",function(d){g.attr("title",d)}):g.attr("title","")}})};
StackExchange.comments=function(){function g(a,b){this.postId=a;this.jDiv=b;this.jtBody=b.find(" > table > tbody");this.jCommentsLink=$("#comments-link-"+a)}function d(a){var d=(a.constructor===$?a:$(a)).closest(".question, .answer, div[id^='post-']").find(".comments"),a=d.attr("id").replace(/^comments-/,"");if(b[a])return b[a];d=new g(a,d);return b[a]=d}function h(){if(0!=$(".question[data-questionid]").length){var a=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var b=
$(this),f=b.closest(".answer"),d=f&&f.length?f.data("answerid"):0,f=b.closest(".comment").attr("id").substr(8),d=d?d:a,f="#comment"+f+"_"+d;0<location.href.indexOf("/questions/")?b.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({hash:f})):b.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({hash:f,pid:d}))})}}var b={},j=function(){};g.prototype={checkDiscussion:j,ensureInput:j,saveEditingComments:j,restoreEditingComments:j,commentsShown:function(){this.jtBody.data("remaining-comments-count",
0)},addShow:function(a){var b=this,d=this.loadAllComments().done(function(){b.checkDiscussion()}),i=this.ensureInput();i&&!a&&i.focus();d.done(function(){i&&0<i.length&&b.jCommentsLink.hide()})},ajax:function(a,b,d,i){d&&!i&&StackExchange.helpers.addSpinner(d,{"margin-left":"10px"});var h=this;return $.ajax(a).fail(function(a){var c=a.responseText;if(!c||100<=c.length)c="An error occured"+(b?" "+b:"");StackExchange.helpers.showErrorMessage(d||h.jDiv,c,{"transient":409==a.status});d&&!i&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},
showComments:function(a,b){this.saveEditingComments(b);this.jtBody.html(a);this.restoreEditingComments();if(!0==this.jDiv.data("localized")){var d=this.jtBody.data("addlink-html");this.jCommentsLink.html($("<div/>").html(d).text());this.jtBody.data("addlink-disabled")&&!this.jCommentsLink.hasClass("disabled-link")&&this.jCommentsLink.addClass("disabled-link")}else this.jCommentsLink=$("#comments-link-"+this.postId),this.jCommentsLink.is(":visible")&&!b&&(d=$("#hidden-comments-link-"+this.postId).removeClass("dno").attr("id",
"comments-link-"+this.postId).show(),d.length&&(this.jCommentsLink.replaceWith(d),this.jCommentsLink=d));"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);h();this.commentsShown()},loadAllComments:function(a,b){this.jDiv.removeClass("dno");if(!a&&!/more comment/.test($("#comments-link-"+this.postId).text()))return $.Deferred().resolve().promise();var d=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments"+(b||""),dataType:"html"},"while fetching comments").done(function(a){d.showComments(a)}).promise()}};
return{init:function(a){a=a&&a.post||document;$(a).on("click","a[id^='comments-link-']",function(a){$(this).hasClass("disabled-link")||(a.preventDefault(),a=/more comment/.test($(this).text()),d(this).addShow(a))});a==document&&h()},loadAll:function(a,b){return d(a).loadAllComments(!0,b)},extendPostUi:function(a){for(var b in a)a.hasOwnProperty(b)&&(g.prototype[b]=a[b])},uiForPost:d}}();
StackExchange.share=function(){function g(d,b,j){window.open(d,b,j)||(window.location.href=d)}function d(d,b,j){var b=b+("="+("undefined"!==typeof j?j:"1")),j=d.indexOf("?"),a=d.indexOf("#");return-1==j?-1==a?d+"?"+b:d.substring(0,a)+"?"+b+d.substring(a):-1==a?d+"&"+b:d.substring(0,a)+"&"+b+d.substring(a)}return{gplus:function(h,b,j,a){b=d(b,"sgp",a);h.click(function(){g("https://plus.google.com/share?url="+b,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(h,
b,j,a){b=d(b,"stw",a);h.click(function(){g("http://twitter.com/share?url="+b+"&ref=twitbtn&text="+j,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(h,b,j,a){b=d(b,"sfb",a);h.click(function(){g("http://www.facebook.com/sharer.php?u="+b+"&ref=fbshare&t="+j,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(g,d){window.tagRenderer||(window.tagRendererRaw=function(h,b,j){var b=b||"",j=j||"a",a="";b||(g&&-1<$.inArray(h,g)?a=" required-tag":d&&-1<$.inArray(h,d)&&(a=" moderator-tag"));a="<"+j+" class='post-tag"+a+"'";"a"===j.toLowerCase()&&(a+=" href='"+b+"/questions/tagged/"+encodeURIComponent(h)+"' title=\"show questions tagged '"+h+"'\" rel='tag'");return a+(">"+h+"</"+j+">")},window.tagRenderer=function(d,b,j){return $(tagRendererRaw(d,b,j))})}
function showFadingHelpText(g){g.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var g={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},d=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),h=function(b){return $(b).parent().hasClass("tag-editor")?g["tag-editor"]:g[$(b).attr("id")]};d.focus(function(){var b=h(this);d.each(function(){var a=h(this);a!=b&&$(a).hide()});var j=$(b);j.is(":visible")||showFadingHelpText(j)})}
$.fn.extend({postId:function(){var g=this.first();if(!g.hasClass("answer")||!g.hasClass("question"))g=g.closest(".answer, .question");return parseInt(g.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function g(b){b=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(b);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");b.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function d(){var b=
StackExchange.options.site.name,b=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+b+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+b+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',
$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));b.find("form").submit(function(){var b=$(this),a=b.find("#newsletter-email-input"),d=b.find("#newsletter-email-submit"),f=$.trim(a.val());if(0==f.length)return!1;StackExchange.helpers.addSpinner(b);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:f},success:function(f){"confirmed"==f.status&&!f.error?(a.attr("disabled",!0),d.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==f.status&&!f.error?(a.attr("disabled",!0),d.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),b.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):
b.showErrorMessage(f.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){b.showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(b)}});return!1});g(b)}function h(){var b=window.location.pathname.toLowerCase(),d="unknown";"/"==b?d="homepage":"/questions"==b?d="questionlist":0==b.indexOf("/users/edit")?d="userprofile":0==b.indexOf("/questions/tagged/")?
d="questionlist_bytag":/^\/questions\/\d+/.test(b)&&(d="questionpage");return d}return{init:function(){StackExchange.using("gps",function(){StackExchange.gps.track("newsletter.show",{newsletter_type:h()},!0)});$("#newsletter-signup").click(function(){var b=$(this);if(StackExchange.options.user.isAnonymous)return d(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(d){d.url?window.location.href=d.url:"confirmed"==
d.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==d.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):b.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},error:function(){b.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},
complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var b=$(window).height(),b=Math.min(600,b-100),b=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',b,'px;"><iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',b,'" frameborder="0"></iframe></div>'].join("");g(b);return!1})},loader:function(b,d){var b=d||b,a=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",
data:{domain:b},success:function(b){$("#newsletter-ad").remove();a.empty().append($(b))},complete:function(){a.attr("class","").attr("style","")}});d||(window.sessionStorage.tNewsletter=b+"-continued")}}}();
(function(g,d,h,b){var j=!("selectionStart"in g("<input type='text' />")[0]);g.fn.caret=function(a,g){var f,i,m=this[0];if("object"===typeof a&&"number"===typeof a.start&&"number"===typeof a.end)f=a.start,i=a.end;else if("number"===typeof a&&"number"===typeof g)f=a,i=g;else if("string"===typeof a)-1<(f=m.value.indexOf(a))?i=f+a[d]:f=null;else if("[object RegExp]"===Object.prototype.toString.call(a)){var e=a.exec(m.value);null!=e&&(f=e.index,i=f+e[0][d])}if("undefined"!=typeof f)return j?(e=this[0].createTextRange(),
e.collapse(!0),e.moveStart("character",f),e.moveEnd("character",i-f),e.select()):(this[0].selectionStart=f,this[0].selectionEnd=i),this[0].focus(),this;if(j)if(i=document.selection,"textarea"!=this[0].tagName.toLowerCase()){e=this.val();f=i[h]()[b]();f.moveEnd("character",e[d]);var c=""==f.text?e[d]:e.lastIndexOf(f.text);f=i[h]()[b]();f.moveStart("character",-e[d]);var k=f.text[d]}else f=i[h](),i=f[b](),i.moveToElementText(this[0]),i.setEndPoint("EndToEnd",f),c=i.text[d]-f.text[d],k=c+f.text[d];else c=
m.selectionStart,k=m.selectionEnd;f=m.value.substring(c,k);return{start:c,end:k,text:f,replace:function(a){return m.value.substring(0,c)+a+m.value.substring(k,m.value[d])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(g,d){function h(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var b=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>',g,"</div>"].join("")),j=b.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");b.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(h);
$.getScript("http://api.recaptcha.net/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(j);j.submit(function(){StackExchange.helpers.disableSubmitButton(j);j.find('input[type="submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",data:j.serialize(),success:function(a){a.captchaError?(StackExchange.helpers.removeSpinner(),
StackExchange.helpers.enableSubmitButton(j),j.find(".form-error").html(a.captchaError),Recaptcha.reload()):(h(),d(a))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(j);StackExchange.helpers.showErrorMessage(j,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();
StackExchange.gps=function(){function g(){var d;d=localStorage[a];d=!d?[]:JSON.parse(d);if(0<d.length){for(var i=(new Date).getTime(),g=[],e=0;e<d.length;e++){var c=d[e],k=i-c.now;if(0>k||36E5<k||10<e){b(c);return}g.push(c)}0<g.length&&j(g)}}function d(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(a,b){h(b)}),delete StackExchange._gps_track)}function h(b){b&&StackExchange.options&&StackExchange.options.user&&(b.properties&&!b.properties.user_type&&(b.properties.user_type=StackExchange.options.user.user_type),
!b.ab&&StackExchange.options.user.ab&&(b.ab=StackExchange.options.user.ab));var d=localStorage[a];d?(d=JSON.parse(d),d.push(b),localStorage[a]=JSON.stringify(d)):localStorage[a]=JSON.stringify([b])}function b(b){var d=localStorage[a];if(d){for(var d=JSON.parse(d),b=JSON.stringify(b),g=-1,e=0;e<d.length;e++){var c=JSON.stringify(d[e]);if(b==c){g=e;break}}-1!=g&&(d.splice(g,1),0==d.length?localStorage.removeItem(a):localStorage[a]=JSON.stringify(d))}}function j(a){$.isArray(a)||(a=[a]);$.ajax({type:"POST",
url:"/gps/event",data:JSON.stringify(a),success:function(){for(var d=0;d<a.length;d++)b(a[d])}})}var a="gps-pending",l=!1;return{init:function(a){if(l)return!0;l=!0;if(!a||!window.localStorage)return StackExchange.gps.track=function(){},delete StackExchange._gps_track,!1;d();g();return!0},track:function(a,b,d){a={evt:a,properties:b||{},now:(new Date).getTime()};h(a);d||j(a)},sendPending:g}}();
StackExchange.openid=function(){function g(a){a&&StackExchange.gps.track("openid.click",{openid_provider:a,location:l},!0)}function d(a,b){var d=b.find(".option-extra-fields");d.hide();b.find(".yahoo-button").click(function(){d.hide();h(a,"yahoo")});var c=function(c){var f="."+c+"-option";d.show();d.find("> div:not("+f+")").hide();d.find(f+", .extra-field-container").show();b.find(".extra-field").val("").focus();f=b.find(".extra-field-submit");f.unbind("click");f.click(function(){h(a,c,b.find(".extra-field").val())})};
b.find(".blogger-button").click(function(){c("blogger")});b.find(".aol-button").click(function(){c("aol")})}function h(a,b,d){b=f[b];d&&(b=b.replace("{username}",d));a.find(".use-facebook").val("false");a.find(".manual-openid").val(b);a.find(".submit-openid").click()}function b(a){a.find(".use-facebook").val("true");a.find(".manual-openid").val("");a.find(".submit-openid").click()}function j(a){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(a)})}}
function a(a,b,d,c){var k=a.find(".manual-openid").val();a.find(".use-facebook").val();j(function(){var a=$('<form method="post" action="/users/authenticate?returnurl='+encodeURIComponent(b)+'"></form>');if(k){var f=$('<input type="hidden" name="openid_identifier" />');a.append(f);f.val(k)}else{var f=$('<input type="hidden" name="oauth_version" />'),g=$('<input type="hidden" name="oauth_server" />');a.append(f);a.append(g);f.val("2.0");g.val("https://www.facebook.com/dialog/oauth")}a.append("<input type='hidden' name='fkey' value='"+
StackExchange.options.user.fkey+"' />");d&&c&&($('<input type="hidden" name="anon_vote_type" />').val(d).appendTo(a),$('<input type="hidden" name="anon_vote_hash" />').val(c).appendTo(a));StackExchange.navPrevention.stop();a.hide().appendTo("body").submit()})()}var l="unknown",f={yahoo:"http://yahoo.com/",google:"https://www.google.com/accounts/o8/id",aol:"http://openid.aol.com/{username}",blogger:"http://{username}.blogspot.com/"};return{initPostLogin:function(f,m){var e=decodeURIComponent(m);"/questions/ask"===
e&&(l="question_ask");var c=$(f),k=c.find(".new-login-left"),n=c.find(".new-login-right"),p=k.find(".show-more-options");p.click(function(){p.hide();n.show();return!1});n.find(".hide-more-options").click(function(){p.show();n.hide();return!1});c.removeClass("dno");d(c,n);k.find(".google-login").click(function(){g("Google");h(c,"google")});k.find(".facebook-login").click(function(){g("Facebook");b(c)});k.find(".stackexchange-login").click(j(function(){g("Stack Exchange");StackExchange.navPrevention.stop();
window.location="/users/login#create-account"}));c.find(".submit-openid").click(function(){a(c,e)})},initAnonVotePopup:function(d,f,e,c){var k=decodeURIComponent(f);l="votedialog";d.find(".google-login").click(function(){g("Google");h(d,"google")});d.find(".facebook-login").click(function(){g("Facebook");b(d)});d.find(".stackexchange-login").click(function(){g("Stack Exchange");window.location="/users/login#create-account"});d.find(".submit-openid").click(function(){a(d,k,e,c)})}}}();
StackExchange.loggedIn={};
var profileLink=function(){var g,d=!1,h,b,j=function(){return $(".profile-link")},a=function(a){a||(a=j());return a.hasClass("profile-link-on")},l=function(a,c){c.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},f=function(a){if(!a.data("loading")){a.data("loading",!0);var c=a.find(".profile-wrapper");c.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(c).fadeIn("fast");c.find(".profile-footer").click(profileLink.click);
i()},error:function(){a.data("loading",!1)},complete:StackExchange.helpers.removeSpinner})}},i=function(){var a=new Date;a.setTime(a.getTime()+1E3*b);var c=a.getUTCHours(),a=a.getUTCMinutes();10>c&&(c="0"+c);10>a&&(a="0"+a);$(".profile-popup .popup-clock .popup-time").text(c+":"+a)},m=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){e.cancel()}}),e=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){m.cancel()}}),c=
function(a){a.hover(m.trigger,e.trigger)};return{init:function(e,f,g,h){var i=j(),l=$(".profile-triangle");i.attr("href");d=f;$(location).attr("pathname");b=h||0;l.click(profileLink.click);f||c(i.add(l));$(document).click(function(c){a(i)&&c.target!=i[0]&&c.target!=l[0]&&!$.contains($(".profile-wrapper")[0],c.target)&&profileLink.hide()})},click:function(){var c=j();e.cancel();m.cancel();a(c)?profileLink.hide():profileLink.show()},show:function(b,e){if(!b||"number"==typeof b)b=j();e||(e=$(".profile-popup"));
if(!e.length){var p=b,q=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"></div></div>');q.insertBefore(p);d||c(q);e=q}a(b)||(e.fadeIn("fast"),f(e),l(!0,b),h=new Date);g||(g=setInterval(i,2E4),i())},hide:function(c,b){if(h&&!(500>(new Date).getTime()-h.getTime())){if(!c||"number"==typeof c)c=j();b||(b=$(".profile-popup"));a(c)&&(b.fadeOut("fast"),l(!1,c));g&&(clearInterval(g),g=null)}}}}();
StackExchange.tagPreferences=function(){function g(a,c,b){var d="";"undefined"!=typeof forUserId&&(d=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:c,forUserId:d},b)}var d=[],h=$('<table><tr><td class="vt"><input id="interestingTag" type="text" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),b=$('<table><tr><td class="vt"><input id="ignoredTag" type="text" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),
j=function(a,c){return a.map(function(a,c){return $(c).text()}).filter(function(a,b){if(!c)return!0;var d;/\*/.test(b)&&(d=RegExp(b.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<c.length;a++){var e=c[a];if(b===e||d&&d.test(e))return!1}return!0}).map(function(a,c){var b;b=c.replace(/#/g,"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(b)?"div.tags:regex(class, t-"+b.replace(/\*/g,".*")+")":"div.t-"+b}).get().join(",")},a=function(a,c,b,d,e,k){for(var h=$(a).val(),
i=sanitizeAndSplitTags(h,!0),j=!1,n=0;n<i.length;n++)0!=$.trim(i[n]).length&&($(c).children().each(function(){$(this).text()==i[n]&&($(this).fadeTo(500,0.1).fadeTo(500,1),j=!0)}),j||(h=$.URLEncode(i[n]),$(c).append('<a id="'+i[n]+'" href="/questions/tagged/'+h+'" class="'+d+'" title="show questions tagged \''+i[n]+"'\">"+i[n]+"</a> "),l(b)),j=!1);$(a).val("");e&&$(a).focus();k||g(b,$(c).text());f()},l=function(a){a=20==a?"#interestingTags > .post-tag:last":25==a?"#ignoredTags > .post-tag:last":40==
a?"#interestingTags > .post-tag":45==a?"#ignoredTags > .post-tag, #remainingIgnored > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag";$('<span class="delete-tag" title="remove this tag"></span>').appendTo($(a)).click(function(a){var a=$(a.target).closest(".post-tag"),c=a.closest("div"),b=c.is("#ignoredTags")?25:c.is("#interestingTags")?20:-1;-1===b?console.log("removeTag: unknown container. Stopping execution. '"+c.text()+"'"):(a.remove(),g(b,c.text()),f());return!1})},f=function(a,
c){if(c)for(var b=0;b<c.length;b++)-1==d.indexOf(c[b])&&d.push(c[b]);var c=d,b=$("#ignoredTags > a, #remainingIgnored > a"),e=$("#interestingTags > a");if(!a||!(0==b.length&&0==e.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");b=j(b,c);e=j(e,c);if(0<b.length){var f=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(b).closest("div.question-summary").addClass(f)}0<e.length&&$(e).closest("div.question-summary").addClass("tagged-interesting")}},
i=function(c,b){var d=$("#tag-menu"),k;"favorite"==b&&(k=$("#ignoredTags a").filter(function(){return $(this).text()==c}),k.add(k.next()).remove(),$("#interestingTag").val(c),a("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==b&&(k=$("#interestingTags a").filter(function(){return $(this).text()==c}),k.add(k.next()).remove(),$("#ignoredTag").val(c),a("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==b&&(k=$("#ignoredTags a").filter(function(){return $(this).text()==c}),
k.add(k.next()).remove(),k=$("#interestingTags a").filter(function(){return $(this).text()==c}),k.add(k.next()).remove(),f());StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(c)+"/favorite",data:{action:b,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(a){e(d.html($(""+a)),c)},error:function(){},complete:StackExchange.helpers.removeSpinner})},m=function(a,c){var b=$("#tag-menu");StackExchange.helpers.addSpinner(b);$.ajax({type:"POST",url:"/tags/"+
encodeURIComponent(a)+"/subscription",data:{unsubscribe:c,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(c){e(b.html($(""+c)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},e=function(a,c){a.find(".tm-se-subscription").click(function(){m(c,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?i(c,"ignore"):$(this).hasClass("tm-favorite-clear")?i(c,
"favorite"):$(this).hasClass("tm-favorite-ignore")&&i(c,"clear")})},c=function(a){var c=$("#interesting-tags").data("text-add");c&&a.val(c)},k=function(b){b&&l(40);$("#add-interesting").append(h);b=h.find("#interestingAdd").unbind("click").bind("click",function(){a("#interestingTag","#interestingTags",20,"post-tag user-tag",!0);$("#tag-subscriptions").removeClass("dno")});c(b);StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")});v()},n=function(d){d&&l(45);
$("#add-ignored").append(b);d=b.find("#ignoredAdd").unbind("click").bind("click",function(){a("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)});c(d);StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")});v()},p=function(a){if($.contains(document.documentElement,a.target)&&!$(a.target).closest("#interesting-tags").length){var a=0<$("#interestingTags > .post-tag").length,c=0<$("#ignoredTags > .post-tag, #remainingIgnored > .post-tag").length;a?($("#add-interesting table").remove(),
$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")):($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno").addClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"));c?($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")):($("#add-ignored table").remove(),
$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"));$("#interesting-tags .delete-tag").remove();x();$(document).off("click",p)}},q=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno");k(!1)});$("#addIgnoredTag").on("click",function(){$(this).addClass("dno");n(!1)});$("#edit-interesting").on("click",function(){$(this).addClass("dno");$("#tag-subscriptions").removeClass("dno");k(!0)});$("#edit-ignored").on("click",function(){$(this).addClass("dno");
n(!0)});$("#showRemainingIgnored").on("click",function(){$("#showRemainingIgnored").addClass("dno");$("#remainingIgnored").removeClass("dno")})},v=function(){$(document).on("click",p)},u=!1,x=function(){u&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{applyPrefs:f,isIgnored:function(a){var c=$("#ignoredTags > a, #remainingIgnored > a");if($("#hideIgnored").is(":checked")&&(c=j(c,!0),0<c.length))return 0<$(a).find(c).length},
forceEditMode:function(){u=!0},init:function(){StackExchange.tagmenu.init(e);0!=$("#interestingTags").length&&(q(),v(),$("#hideIgnored").click(function(){g(30,$(this).is(":checked"));f()}),x())}}}();
StackExchange.question.fullInit=function(g){window.votesCast=g.votesCast;StackExchange.vote.init(g.questionId);StackExchange.question.bindSuggestedEditPopupLinks();StackExchange.vote_bounty.init(g);if(/^#autocomment/.test(window.location.hash)){var d=$(".comments-link:first"),h="#comment-"+window.location.hash.substring(12),b=function(){var b=$(h),a=$("<span><b>Trivial answer converted to comment</b></span>");b.find(".comment-date").append($("<br>")).append(a);b.css({backgroundColor:g.highlightColor});
b.animate({backgroundColor:g.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(h)[0].scrollIntoView(!0)};g.totalCommentCount&&g.shownCommentCount&&g.totalCommentCount!=g.shownCommentCount?StackExchange.comments.loadAll(d).done(b):b()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function g(d){var g=d.parent(),b=d.attr("id").substring(13);d.data("working")||(d.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+b,dataType:"html",success:function(b){var b=$(['<div id="lightbox-panel" class="popup popup-suggested-edit" style="display: block;"><div class="popup-controls"><div class="handle"></div><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div></div><div class="suggested-edit-container">',
b,"</div></div>"].join("")),a=$(window).height();b.find(".popup-suggested-edit").css({"max-height":a-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");b.appendTo(g).css("height","600px").center().css("height","").fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()});StackExchange.helpers.bindMovablePopups()},error:function(b){g.showErrorMessage(b.responseText&&200>b.responseText.length?b.responseText:
"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();d.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){g($(this));return!1})})};
StackExchange.vote=function(){var g=StackExchange.helpers,d={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},h=function(a){var a=a?a.closest("div.vote"):$("div.vote"),c=0<$("body.read-only").length;a.find(".vote-up-off, .vote-down-off").each(function(){var a,b,d,f=$(this);c?a="Voting is disabled while the site is in readonly mode":(a=f.hasClass("vote-up-off"),b=(a?m:e)(f),d=0<f.closest(".answer").length,
a=(d?a?"This answer is useful":"This answer is not useful":a?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful")+(StackExchange.loggedIn&&b?" (click again to undo)":""));f.attr("title",a)})},b=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){l($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){f($(this))})},j=function(a){$.each(a,function(){var a=$("div.vote:has(input[value="+
this.PostId+"])");switch(this.VoteTypeId){case d.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case d.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case d.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},a=function(a){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+a+
"/votes",dataType:"json",success:j}):j(window.votesCast);b();h()},l=function(a){var c=a.parent().find(".vote-up-off"),b=a.parent().find(".vote-down-off"),f=m(c),g=e(b);n(a,f?-1:g?2:1);k(c,b);f||c.addClass("vote-up-on");p(a,f?d.undoMod:d.upMod)},f=function(a){var c=a.parent().find(".vote-up-off"),b=a.parent().find(".vote-down-off"),f=e(b),g=m(c);n(a,f?1:g?-2:-1);k(c,b);f||b.addClass("vote-down-on");p(a,f?d.undoMod:d.downMod)},i=function(){return $("div.vote a[id^='vote-accepted-']")},m=function(a){return a.hasClass("vote-up-on")},
e=function(a){return a.hasClass("vote-down-on")},c=function(a){return a.closest("div.vote").find("input[name=_id_]").val()},k=function(a,c){a.removeClass("vote-up-on");c.removeClass("vote-down-on")},n=function(a,c){var b=a.siblings("span.vote-count-post"),d;if(0<b.find(".vote-count-separator").length){d=parseInt(b.children(":first").text(),10);var e=Math.abs(parseInt(b.children(":last").text(),10));d-=e;t(b)}else d=parseInt(b.text(),10);b.text(d+c)},p=function(a,b){(a?a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click");
var d=c(a);q(a,d,b,v,{ltu:a.closest("div.vote").find("input[name=_ltu_]").val()})},q=function(a,c,b,d,e,f){var k={fkey:StackExchange.options.user.fkey};if(e)for(var g in e)k[g]=e[g];var h=function(){$.ajax({type:"POST",url:"/posts/"+c+"/vote/"+b,data:k,dataType:"json",success:function(b){b.Warning?confirm(b.Message)?(k.ignoreWarnings="true",h()):f&&f():(d(a,c,b),f&&f())},error:function(){a.parent().showErrorMessage("An error has occurred - please retry your request.");f&&f()}})};h()},v=function(a,
c,e){if(e.Success){e.Message&&a.parent().showInfoMessage(e.Message);if(e.ShowShareTip){var f=$(a).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(f)}e.LastVoteTypeId==d.upMod?$(document).trigger("upVote",c):e.LastVoteTypeId==d.downMod?$(document).trigger("downVote",c):$(document).trigger("undoVote",c)}else if(window.console&&window.console.firebug&&(!e.Message||5>e.Message.length))a.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");
else if(e.Message?a.parent().showErrorMessage(e.Message,{"transient":!0}):a.parent().showErrorMessage("An error has occurred - please retry your request."),k(a,a),a.parent().find("span.vote-count-post").text(e.NewScore),e.LastVoteTypeId){var c=e.LastVoteTypeId,g;c==d.upMod?(f=".vote-up-off",g="vote-up-on"):c==d.downMod&&(f=".vote-down-off",g="vote-down-on");f&&a.closest("div.vote").find(f).addClass(g)}b(a.parent());h(a)},u=function(){$(".star-off:not(.disabled)").live("click",function(a){x($(this));
a.preventDefault()})},x=function(a){if(!a.data("loading")){a.data("loading",!0);var b=c(a)||a.siblings("input[type=hidden][name=_id_]").val(),e=a.parent().find("div.favoritecount b"),f=parseInt("0"+e.text().replace(/^\s+|\s+$/g,""),10),k=function(){a.hasClass("star-on")?(a.removeClass("star-on"),e.removeClass("favoritecount-selected").text(0>=f--?"":f)):(a.addClass("star-on"),e.addClass("favoritecount-selected").text(++f))};k();q(a,b,d.favorite,function(c,b,d){a.data("loading",!1);d.Success||(k(),
a.parent().showErrorMessage(d.Message))})}},y=function(a,c){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(b){b.preventDefault();var b=$(this),e=b.attr("id").substring(12),f=-1<b.text().indexOf("undelete"),k=b.data(f?"undelete-prompt":"delete-prompt");k||(k=(StackExchange.options.user.isModerator?"":"Vote to ")+(f?"un":"")+"delete this post?");confirm(k)&&q(b,e,f?d.undeletion:d.deletion,a||r,c)}).unbind("hover").die("hover").live("hover",
function(){var a=$(this);if(a.hasClass("load-tooltip-on-hover")){a.removeClass("load-tooltip-on-hover");var c="/posts/"+a.attr("id").substring(12)+"/delete-tooltip";$.get(c,function(c){a.attr("title",c)})}})},r=function(a,c,b){var d=-1<a.text().indexOf("undelete");b&&b.Success?(a.text(b.Message),a.addClass("load-tooltip-on-hover"),0>b.NewScore?(a=0<$(".question:has(a[id='delete-post-"+c+"'])").length?".question, div.answer":"#answer-"+c,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),
a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):a.parent().showInfoMessage("Your "+(d?"un":"")+"delete vote has been recorded")):(d=b&&b.Message?b.Message:"A problem occurred during "+(d?"un":"")+"deletion",g.showErrorMessage(a.parent(),d))},B=function(){var a=$(this),c=a.attr("id").substring(14),b=i();a.is(":working")||
(a.parent().addSpinner(),b.working(!0),q(a,c,d.acceptedByOwner,function(c,e,f){f.Success?(b.removeClass("vote-accepted-on"),parseInt(f.Message,10)==d.acceptedByOwner&&a.addClass("vote-accepted-on")):a.parent().showErrorMessage(f.Message,{"transient":0==f.Message.indexOf("You can accept")});a.parent().removeSpinner();b.working(!1).trigger("update")}))},o=function(){var a=$(this),c=(a.hasClass("vote-accepted-on")?"un":"")+"accept";a.attr("title",a.data("title-"+c)).text(a.data("verb-"+c))},A=!1,z=function(a){if(!A){A=
!0;var c=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".formatUnicorn({postId:c}),dataType:"json",success:function(c){StackExchange.helpers.removeMessages();a.html('<div style="color:green">'+c.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+c.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",Math.abs(+c.up)+" up / "+Math.abs(+c.down)+" down")},error:function(c){a.removeSpinner().parent().showErrorMessage(c.responseText&&
100>c.responseText.length?c.responseText:"An error occurred during vote count fetch",{"transient":409==c.status})},complete:function(){A=!1}})}},t=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){z($(this))}).data("bound",!0)},s=function(c){a(c);$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&
$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();
u()};return{init:function(a){!StackExchange.options.user.isRegistered?StackExchange.question.bindAnonymousVoteDisclaimers():s(a);i().not(":data(bound)").on({click:B,update:o}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();StackExchange.question.canViewVoteCounts()&&t();y()},up:l,down:f,vote_init:a,favorite_init:u,delete_init:y,bindFetchVoteCounts:t,highlightExistingVotes:j,submit:q,voteTypeIds:d,getPostId:c}}();
StackExchange.vote_closingAndFlagging=function(){function g(a){$("#popup-close-question").remove();var c=t.closest(".post-menu");0==c.length&&(c=t.parent());0<=t.text().indexOf("close")&&t.addSpinnerAfter({padding:"0 3px"});return $.ajax({type:"GET",url:"/flags/questions/{questionId}/close/popup".formatUnicorn({questionId:z}),dataType:"html"}).done(function(b){s=$(b).elementNodesOnly();s.appendTo(c);d();o&&o.closeShowPopup?o.closeShowPopup(s,t):a&&s.center().fadeIn("fast");StackExchange.helpers.bindMovablePopups()}).fail(function(a){a.responseText?
c.showErrorMessage(a.responseText,{"transient":409==a.status}):c.showErrorMessage("Unable to load popup - please try again")}).always(function(){StackExchange.helpers.removeSpinner()})}function d(){s.find(".popup-close").click(function(){StackExchange.helpers.closePopups(".popup")});s.on("popupClose",function(){w&&w.remove()});s.find("input[type=radio]").click(j);$("#close-question-form").submit(function(a){a.preventDefault();k();return!1});$(".retract-close-vote").click(function(){x($(this))});$(".action-list a").attr("target",
"_blank");h();b()}function h(){var a=$(".close-as-duplicate-pane"),c=a.find("#search-text");a.on("show",function(){$("#search-text").focus();$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling");c.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){e(c)}})}function b(){var a=s.find(".off-topic-other-comment-container"),c=a.find("textarea"),b=a.closest("li").find("input[type=radio]"),d=$.trim(c.val()),
e=function(a){s.find(".popup-submit").enable(a)};c.charCounter({target:a.find(".text-counter"),min:30,max:500,setIsValid:e});$(c).bind("blur focus keyup paste",StackExchange.helpers.DelayedReaction(function(){e($.trim(c.val())!=d)},100,{sliding:!0}).trigger);b.click(function(){a.show();c.focus();var b=c.val();c.val("").val(b)});c.focus(function(){b.is(":checked")||b.attr("checked","checked")})}function j(){var c=$(this),b=c.closest("li");if(!b.hasClass("action-selected")){var d=s.find(".popup-subpane").filter(function(){var a=
c.data("subpane-name");return a&&a==$(this).data("subpane-name")}),e=s.find(".popup-submit");d.length?(a(d,$(".popup-active-pane"),!0),d.hasClass("handles-submit-button-enabling")||e.disable()):(e.enable(),s.find(".popup-active-pane li.action-selected").removeClass("action-selected"),b.addClass("action-selected"))}}function a(c,b,d){s.find(".popup-active-pane").removeClass("popup-active-pane").hide();s.find(".popup-title").html(c.data("title"));d&&(d=b.data("breadcrumb")||b.data("title"),f(d,function(){a(b,
c,!1);l(c)}));l(c);c.addClass("popup-active-pane").show().trigger("show").asyncLoad()}function l(a){a.find("input[type=radio]:checked").removeAttr("checked");a.find("li.action-selected").removeClass("action-selected");s.find(".popup-submit").disable()}function f(a,c){var b=$(".popup-title-container .popup-breadcrumbs"),d=$("<span>").addClass("breadcrumb");$("<a>").text(a).click(function(){d.nextAll().andSelf().remove();c()}).appendTo(d);$("<span>").addClass("arrow").html("&gt;").appendTo(d);d.appendTo(b)}
function i(){f("Flagging",function(){s.hide();w.fadeIn("fast");a(s.find("#pane-main"),s.find(".popup-active-pane"),!1)})}function m(a){a=a.find(".list-originals");0==a.children().length?a.hide():(a.show(),c(a,!0),styleCode(),a.find(".item").click(function(){var a=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),c=$("#search-text").hideHelpOverlay().val(a.attr("href"));e(c,a);return!1}).hover(function(){$(this).toggleClass("hover")}))}function e(a,b){var d=a.closest(".popup-subpane"),
e=d.find(".preview"),f=d.find(".list-container"),k=d.find(".search-errors").empty(),g=$("#original-question-id"),h=d.closest("#popup-close-question").find(".popup-submit");h.disable();e.html("").hide();0!=$.trim(a.val()).length&&(b||d.find(".search-spinner").addSpinner(),$.ajax({type:"GET",url:"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),data:{q:a.val()},dataType:"html"}).done(function(a){a=$(a).elementNodesOnly().mathjax();if(a.hasClass("show-original"))f.hide(),
c(a),e.empty().append(a).show(),a.find(".question .show-title a").attr("target","_blank"),a.find(".post-tag").addClass("user-tag"),g.val(a.find(".question").data("questionid")),h.enable();else if(a.hasClass("list-originals"))f.empty().append(a).show(),m(f);else throw"these are not the results you were looking for";}).fail(function(a){k.text(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred while searching; please try again");h.disable();g.val("");d.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()}))}
function c(a,c){var b=$(".close-as-duplicate-pane .original-display").find(".navi-container"),d=a.find(".navi"),e=$("#search-text");if(c)b.empty();else{var f=b.find(".navi");if(1!=f.length)return;f.empty();$("<a>").text(f.data("abbr")).click(function(){f.html(f.data("text")).siblings().remove();b.siblings(".preview").hide();b.siblings(".list-container").show();$("#original-question-id").val("");$("#popup-close-question").find(".popup-submit").disable();$(".close-as-duplicate-pane").find(".search-errors").empty();
e.val(f.data("search-text")).focus()}).appendTo(f)}d.data("search-text",e.val()).text(d.data("text")).prependTo(b)}function k(){var a=s.find(".popup-submit");a.attr("disabled")||($(".remaining-votes").addSpinner({position:"absolute",margin:"18px 0 0 3px"}),a.disable(),a=function(a,c){return s.find(a+' input[type=radio][name="'+c+'"]:checked').val()},$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,
closeReasonId:a("#pane-main","close-reason"),duplicateOfQuestionId:$("#original-question-id").val(),closeAsOffTopicReasonId:a(".close-as-off-topic-pane","close-as-off-topic-reason"),belongsOnBaseHostAddress:a(".migration-pane","migration"),offTopicOtherText:s.find(".off-topic-other-comment-container textarea").val(),offTopicOtherCommentId:s.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id")}}).done(function(a){p(a)}).fail(function(){t.parent().showErrorMessage("An error occurred; please try again")}).always(function(){s.find(".popup-close").click()}))}
function n(){t.is(":working")||(t.working(!0).addSpinner({margin:"0 3px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/reopen/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){p(a)}).fail(function(){t.working(!1).parent().showErrorMessage("An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function p(a){a.isClose="QuestionClose"==a.FlagType;a.isRecommendClose="QuestionRecommendClose"==
a.FlagType;a.isReopen="QuestionReopen"==a.FlagType;a.verb=a.isRecommendClose?"flag":a.isReopen?"reopen":"close";var c=t;a.isClose&&t.is('[class*="flag-post-"]')&&(c=t.parent().find("a[class*='close-question']"));a.Success?q(a,c):u(a,c)}function q(a,c){if(!o||!o.closeCallback||!o.closeCallback(c,a,a.isRecommendClose)){var b=function(){var a=window.location.href.splitOnLast("#")[0];0>a.indexOf("noredirect=1")&&(a+=(0>a.indexOf("?")?"?":"&")+"noredirect=1");window.location.href=a};a.ResultChangedState?
b():(("Duplicate"==a.CloseReason||a.CloseAsOffTopicReasonId==B)&&0==c.closest(".mod-post-header").length&&StackExchange.comments.loadAll(c),a.Tooltip&&c.attr("title",a.Tooltip),a.Message?v(a,c):b())}}function v(a,c){c.parent().showInfoMessage(a.Message);if(!a.isRecommendClose){var b=c.find(".existing-flag-count");0==b.length&&(c.text(c.text()+" "),b=$('<span class="existing-flag-count">').appendTo(c));b.text(a.Count)}}function u(a,c){var b=a.Message||"A problem occurred when trying to "+a.verb;if(!o||
!o.closeErrorCallback||!o.closeErrorCallback(b))c.parent().showErrorMessage(b),a.RefreshClient&&setTimeout(function(){location.reload(!0)},2500)}function x(a){!a.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(a.disable().addSpinnerBefore({position:"absolute",margin:"18px 0 0 -25px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/retract".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){v(a,
t)}).fail(function(){t.parent().showErrorMessage("An error occurred; please try again")}).always(function(){s.find(".popup-close").click()}))}function y(a){w=a;C();w.find(".js-flag-load-close").unbind("click").click(function(){A?A(w,$(this)):E($(this))});w.find("form").submit(function(a){a.preventDefault();F();return!1});r();o&&o.flagShowPopup?o.flagShowPopup(a,t):StackExchange.helpers.bindMovablePopups()}function r(){w.find(".action-list > .disabled-action").each(function(){var a=$(this);a.find("input[type=radio]").attr("disabled",
"disabled");a.find(".action-name").addClass("disabled-button")})}var B=3,o,A,z,t,s,w,C=function(){var a=w.find(".popup-submit"),c=w.find('textarea[name="otherText"]'),b=w.find('input[value="PostOther"]');c.focus(function(){c.hideHelpOverlay();b.is(":checked")||b.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(c){b.is(":checked")&&a.enable(c)}});b.click(function(){c.focus()})},D=function(a){if(a.is(".mod-attention-subform")){var c=a.find('textarea[name="otherText"]').helpOverlay();
0<a.find('input[value="PostOther"]:checked').length?c.focus():0==a.find("input:radio:checked").length&&a.closest(".popup").find(".popup-submit").disable()}},E=function(a){var c=w.fadeOut("fast").promise();s||(a.siblings(".action-name").addSpinner({margin:"0 5px"}),c=g(!1));c.done(function(){i();a.is(".js-flag-load-close-duplicate")&&s.find("input[value=Duplicate]").click();s.center().fadeIn("fast")});w.find(".popup-submit").disable();a.removeAttr("checked");w.find(".action-list li").trigger("hide-action")},
F=function(){w.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var a=0<=window.location.href.toLowerCase().indexOf("/tools/flagged"),c=w.find('input[name="top-form"]:checked').val(),b="";"PostOther"==c&&(b=w.find('textarea[name="otherText"]').val());$.ajax({type:"POST",url:"/flags/posts/{postId}/add/{flagType}".formatUnicorn({postId:z,flagType:c}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,otherText:b,fromToolsQueue:a}}).always(function(){StackExchange.helpers.closePopups(".popup")}).done(function(a){if(!o||
!o.flagCallback||!o.flagCallback(t,a))a.ResultChangedState?location.reload(!0):a.Message&&(a.Success?t.parent().showInfoMessage(a.Message):t.parent().showErrorMessage(a.Message))}).fail(function(a){a=a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during flagging";t.parent().showErrorMessage(a)})};return{close_afterLoadListOriginals:m,updateCloseLinkCount:v,init:function(a){o||(o=a);$("body").off("click",".close-question-link, .close-question-button").on("click",".close-question-link, .close-question-button",
function(a,c){a.preventDefault();var b=$(this),d=!!c;z=t=s=w=null;z=b.data("questionid");t=b;b.is(":data(isclosed)")?(d||confirm("Nominate this question for reopening?"))&&n():g(!0)});$("body").off("click",".flag-post-link, .flag-post-button").on("click",".flag-post-link, .flag-post-button",function(a){a.preventDefault();a=$(this);z=t=s=w=null;z=a.data("postid");t=a;var c=a.hasClass("show-invalid")?"?showInvalid=true":"";a.loadPopup({url:"/flags/posts/{postId}/popup".formatUnicorn({postId:z})+c,loaded:y,
hideDescriptions:!1,subformShow:D,dontCenter:o&&o.flagShowPopup})})}}}();
(function(){function g(a,b){this.commentId=a;this.jComment=b;this.postUi=l(b)}function d(a){var a=a.constructor===$?a:$(a),a=a.hasClass("comment")?a:a.closest(".comment"),b=a.attr("id").replace(/^comment-/,"");return new g(b,a)}function h(a,b,d){/Android/.test(navigator.userAgent)&&$(b,a).bind("touchstart",function(a){a=$(a.target);if(!a.is(d))return!0;var c=a.data("events");if(c&&c.click&&c.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function b(a,b,
e){$(".comments",a).delegate(b,"click",function(){d(this)[e]()});h(a,".comments",b)}var j,a=StackExchange.comments,l=a.uiForPost;a.extendPostUi({ensureInput:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),b=this;return a.children().length?(a.add(a.prev()).show(),a.find("textarea")):i(a,"Add Comment",!1,function(){b.submitNewComment()})},saveEditingComments:function(a){var b=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var e=d(this);if(e.commentId!==
a){var f=$(this).find("textarea");b.push([e.commentId,f.val()])}})},restoreEditingComments:function(){this.editingComments&&($.each(this.editingComments,function(a,b){var e=b[1],f=$("#comment-"+b[0]);f.length&&d(f).edit(e,!0)}),delete this.editingComments)},commentsShown:function(){try{var a=this.jDiv.find("form[id^='add-comment-'] textarea:focus");a.length&&StackExchange.comments.tabCompleter.init(a);this.jCommentsLink.data("comments-count",0)}catch(b){}},submitNewComment:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),
b=a.find("textarea"),d=this,e=a.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:b.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",e).done(function(e){d.showComments(e);b.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(a);a.add(a.prev()).hide();d.jCommentsLink.show();$(document).trigger("comment",d.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},checkDiscussion:function(){var a=
this.jDiv.find("tr.is-comment-discussion"),b=this;if(a.length){a.remove();var d=this.jDiv.find(".comment-form");d.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(a){$(this).unbind("click");a.preventDefault();b.ajax({url:"/posts/"+b.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},
type:"POST"},"when trying to move the discussion to chat",d).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorMessage(d,a.message)})}).end().prependTo(d),a.remove())}}});g.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var a=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),b=this;this.submitVote(0).done(function(d){d.Success?
(a.closest("tr").siblings("tr").show(),b.renderScore(d.NewScore),a[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",b.postUi.postId)):a.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(b){409===b.status&&a.addClass("comment-up-undo");a.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var a=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),b=this;this.submitVote(2).done(function(d){d.Success?
(a.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),a.addClass("comment-up-undo"),b.renderScore(d.NewScore),a[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",b.postUi.postId)):a.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){a.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var a=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(b){var d=a.postUi.jDiv.find("textarea");
b.Success&&(0===a.jComment.siblings(".comment").length&&!d.is(":visible")&&a.jComment.closest(".comments").addClass("dno"),a.jComment.remove())})},flag:function(){var a=this;this.jComment.find(".comment-flag").loadPopup({url:"/flags/comments/{commentId}/popup".formatUnicorn({commentId:this.commentId}),loaded:function(b){var d=b.find('textarea[name="other-text"]').charCounter({min:6,max:200,setIsValid:function(){h()}}),e=b.find('input[name="comment-flag-type"]'),f=e.filter('[value="'+d.data("flag-type")+
'"]'),g=b.find(".text-counter"),h=function(){var a=0<e.filter(":checked").length;if(f.is(":checked")){var c=!d.is(":visible"),a=d.show().val().length;g.show();a=6<=a&&200>=a;c&&d.focus()}else d.hide(),g.hide();b.find(".popup-submit").enable(a)};e.click(h);h();b.find("form").submit(function(){var g=e.filter(":checked").val(),h=f.is(":checked")?d.val():"";b.fadeOutAndRemove();a.submitFlag(g,h).done(function(b){b.Success?b.ResultChangedState?a.jComment.remove():a.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove():
b.Message&&a.jComment.find(".comment-flag").closest("td").showErrorMessage(b.Message)});return!1})}})},submitFlag:function(a,b){var d=this.jComment.find(".comment-actions");return this.postUi.ajax({type:"POST",url:"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({commentId:this.commentId,flagTypeId:a}),data:{fkey:StackExchange.options.user.fkey,otherText:b},dataType:"json"},"during flagging",d,!0)},edit:function(a,b){var d=this.jComment,e=d.find('form[id^="edit-comment-"]'),f=this;e.length&&
(d.find(" > td > *").not(e).hide(),d.find("td:last").addClass("comment-form"),d=i(e,"Save Edits",!0,function(){f.submitEdit()}),d.val(a||e.find("div").text()),e.show(),b||d.focus())},cancelEdit:function(){var a=this.jComment,b=a.find('form[id^="edit-comment-"]');b.children("table").remove();b.hide();b.unbind("submit");a.find("td:last").removeClass("comment-form");a.find(" > td > *").not(b).show()},submitEdit:function(){var a=this.jComment.find('form[id^="edit-comment-"]'),b=this;this.postUi.ajax({type:"POST",
url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:a.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"during comment submission",a).done(function(a){b.postUi.showComments(a,b.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},submitVote:function(a,b){var d=this.jComment.find("td:first"),e={fkey:StackExchange.options.user.fkey};if(b)for(var f in b)e[f]=b[f];return this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/vote/"+
a,dataType:"json",data:e,success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorMessage(d,a.Message)}},"during voting",d,!0)},renderScore:function(a){var b="";a&&0<a&&(b+='<span title="number of \'useful comment\' votes received" class="'+(5>a?"":15>=a?"warm":30>=a?"hot":"supernova")+'">'+a+"</span>");this.jComment.find(".comment-score").html(b)}};var f=function(a){a.find("textarea").keyup(function(b){13==b.which&&!b.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&a.submit()}).keypress(function(a){if(13==
a.which&&!a.shiftKey)return!1})},i=function(a,b,e,g){b=a.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+b+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+b+'"/>'+(e?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';
a.append(b);a.find("textarea").attr("placeholder",a.data("placeholdertext"));e&&a.find(".edit-comment-cancel").click(function(){d(a).cancelEdit()});var h=!1,e=a.find("textarea");e.charCounter({min:15,max:600,setIsValid:function(a){h=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});a.find(".comment-help-link").click(m);if(j)e.one("focus",m);a.submit(function(){h?(StackExchange.helpers.disableSubmitButton(a),g(a)):a.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},
100)});return!1});StackExchange.options.desc||f(a);return e},m=function(a){var b=$(this).closest("tbody"),d=b.find(".comment-help-link"),e=$(".comment-help",b),f;if("click"==a.type)f=0==e.length||!e.is(":visible"),f||(m.manualOnly=!0);else{if(m.manualOnly)return;f=!0}var g=function(){d.text(f?"hide help":"help")};0<e.length?f?e.slideDown(g):e.slideUp(g):f&&(a=$("<tr />").appendTo(b),a=$("<td colspan='2' />").appendTo(a),m.helpText?(a.html(m.helpText),$(".comment-help",a).slideDown(g)):(StackExchange.helpers.addSpinner(d),
a.load("/posts/comment-help",function(a){m.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(g)})))},e=a.init;a.init=function(a){e(a);j=a&&a.autoShowCommentHelp;a=a&&a.post||document;b(a,".comment-up","voteUp");b(a,".comment-delete","delete");b(a,".comment-flag","flag");b(a,".comment-edit","edit");b(a,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",a).each(function(){l(this).addShow(!0)})};a.extendCommentUi=function(a){for(var b in a)a.hasOwnProperty(b)&&
(g.prototype[b]=a[b])}})();
StackExchange.comments.tabCompleter=function(){function g(a){var b=$("#tabcomplete");b.empty();!(5<a.length)&&a.length&&$.each(a,function(a,d){var e=$("<li/>").text(d).appendTo(b);d.toLowerCase()==i.toLowerCase()&&e.addClass("chosen")})}function d(){var a=f.caret().start,b=f.val(),d=!1;if(/@[^\s!?();:+"].*@/.test(b)){if(!/`/.test(b))return null;d=!0}var g=b.substring(a).search(/[\s!?();:+"\[\]\\]/);-1==g&&(g=b.length-a);var h=b.substring(0,a+g).match(/@[^\s!?();:+"\[\]\\]*$/);if(!h)return null;var h=
h[0].substr(1),g=a+g,i=g-h.length;return d&&/@[^\s!?();:+"]/.test(b.substr(0,i-1))?null:{start:i,pos:a,end:g,name:h}}function h(a){var b=d();if(b.name===a)f.is(":focus")||f.focus();else{var g=f.val();f.val(g.substring(0,b.start)+a+g.substring(b.end));a=b.start+a.length;f.caret(a,a)}}function b(a){var b;if(9==a.which){b=$("#tabcomplete li");if(!b.length)return;var d=b.filter(".chosen").removeClass("chosen"),d=a.shiftKey?d.prev():d.next();d.length||(d=a.shiftKey?b.last():b.first());b=d.addClass("chosen").text()}else if(27==
a.which){b=$("#tabcomplete li");if(!b.length)return;b=i;i=null}else return;a.preventDefault();h(b)}function j(a){if(a.which)switch(a.which){case 9:case 16:case 17:case 18:case 220:return}if(a=d()){if(i!=a.name){var b=[];i=a.name;var f;f=a.name?RegExp("^"+StackExchange.helpers.noDiacritics(a.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"):/^\W/;for(var h=l.length,j=0;j<h;j++){var m=l[j].name;(a.name?StackExchange.helpers.noDiacritics(m.replace(/ /g,"").toLowerCase()):m).match(f)&&b.push(m.replace(/ /g,
""))}g(b)}}else i=null,g([])}function a(a){return!a?null:parseInt(a.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var l,f,i=null;$("#tabcomplete > li").live("mousedown",function(){var a=$(this);a.parent().find("li.chosen").removeClass("chosen");h(a.addClass("chosen").text());return!1});var m=a($("#hlinks a.profile-link").attr("href"));return{init:function(d){if(!StackExchange.options.isMobile){var c=d.closest("div.comments"),g=c.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),
g=a(g.attr("href")),h=[];c.find("a.comment-user").each(function(b,c){var d=c.firstChild;if(3!==d.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var d=d.nodeValue,e=a($(c).attr("href"));e!==m&&h.push({id:e,name:d})}});l=[];for(var c={},p=h.length-1;0<=p;p--){var q=h[p];c[q.id]||(l.push(q),c[q.id]=!0)}$("#tabcomplete").remove();f&&f.unbind($.browser.opera?"keypress":"keydown",b).unbind("keyup click",j);0===l.length||1===l.length&&l[0].id===g?f=null:(f=d,i=null,$("<ul id='tabcomplete' />").insertBefore(d),
d.bind("keydown",b).bind("keyup click",j))}}}}();
StackExchange.inlineEditing={init:function(){function g(d,g,b,j){g.fadeIn(b,j);d.hide()}$(".post-menu .edit-post").live("click",function(d){if(!d.ctrlKey&&!d.altKey&&!d.metaKey&&!d.shiftKey){var h=$(this),b=h.closest(".question, .answer");if(1==h.data("handling-event"))return!1;h.data("handling-event",1);b.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();h.addSpinner();var j=b.hasClass("answer"),a=b.find(".postcell,.answercell"),
l=a.find("> *"),f=$('<div class="inline-editor"/>').hide().appendTo(a);f.load(h.attr("href")+"-inline",function(d,m){var e;f.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();b.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(b).offset().top-55},200);if("error"==m)StackExchange.helpers.showErrorMessage(a,"The post could not be loaded"),f.remove(),h.data("handling-event",0);else{g(l,f,300);
var c=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}$("#show-editor-button").show();h.data("handling-event",0);g(f,a,300,function(){f.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(b).offset().top-55},200);return!1},k=function(){u.unbind("keyup",n);r.trigger(e)},n=function(){r.trigger(u[0].value);return!0};f.find(".cancel-edit").click(function(){k();
c(l)});var p=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},1E3,{sliding:!0}),q=f.find(".hide-preview");q.click(function(){var a=f.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),q.text("show preview")):(a.slideDown(),q.text("hide preview"));p.trigger(b);return!1});f.find('input[type="submit"]').attr("id").replace("submit-button","");var v=f.find("form"),u=f.find("#title"),x=$("#question-header a"),
y=u.data("question-state-suffix"),y=y?" "+y:"";e=u.val();var r=StackExchange.helpers.DelayedReaction(function(a){"undefined"!=typeof a&&(x.text(a+y),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,x[0]]))},{sliding:!0});u.keyup(n);f.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(a){if(!0===a.ctrlKey&&13==a.keyCode)return v.submit(),!1;if(27==a.keyCode)return k(),c(l),!1});StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(v,
j?2:1,j?"answer":"question",!1,function(b){var d=$(b.html).hide();a.replaceWith(d);j||$("#question-header a").text(b.title);$("html").trigger("inline-edit-complete",[d,b.title]);styleCode();c(d)})})}});return!1}})}};
StackExchange.vote_bounty=function(){var g,d=function(a,b,d){b=$(".bounty-vote");if(d.Success){$(".bounty-notification").remove();g=!1;var h=a.closest("td.votecell").parent().find("span.reputation-score:last");d.Message&&(d=$(d.Message),h.text(d.text()).attr("title",d.attr("title")));d=a.closest("div.vote").find(".bounty-award-container");1<d.length?(d=d.filter(":first").find(".bounty-award"),h=parseInt(d.text(),10),a=parseInt(a.text(),10),d.text("+"+(h+a)),b.remove()):(a.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
b.not(a).remove())}else StackExchange.helpers.showErrorMessage(a.parent(),d.Message),b.removeClass("disabled")},h=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var a=$(this),b=StackExchange.vote.getPostId(a);if(g?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(a,
b,StackExchange.vote.voteTypeIds.bountyClose,d)})},b=function(a,b){b=$(b||$(".bounty-link"));b=b.off("click",j);if(a)b.on("click",j);return b},j=function(){var a=b(!1,this);a.addSpinnerAfter({padding:"0 3px"});var d=$(a).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+d,dataType:"html",success:function(b){var d=$(b);d.appendTo(a.parent());d.find(".popup-close").click(function(){d.fadeOutAndRemove()});d.center().fadeIn("fast")},error:function(){a.parent().showErrorMessage("Unable to load popup - please try again")},
complete:function(){StackExchange.helpers.removeSpinner();b(!0,a)}})};return{init:function(a){g=!!a.hasOpenBounty;a.canOpenBounty&&b(!0);a.hasOpenBounty&&h()}}}();
